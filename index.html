<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://hv-camera-web-sg.s3-ap-southeast-1.amazonaws.com/hyperverge-web-sdk@3.3.5/src/sdk.min.js"></script>
  </head>
  <body>
    <center><h2>Hyperverge WebSDK Demo</h2></center>
    <div class="container">
      <div class="form-group">
        <button type="button" onclick="runLiveness();" class="btn btn-primary">Run Face Liveness</button>
        <button type="button" onclick="runOCR();" class="btn btn-primary">Run OCR</button>
      </div>
      <div id="div1"></div>
    </div>
    <script>
      // client calls the auth api to get the token from their backend server
		var jwtToken = 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBJZCI6ImE0NmIxMCIsImhhc2giOiI1MGY4ZjAzNTZiNWI1YzE2ODM2OTE5NzBkYTc0OTIwYzQwYjNiN2I1MjlmN2Q3MWY3MTkzZDdmNzhiMjUxNGMwIiwiaWF0IjoxNjU1MTgyNzQ4LCJleHAiOjE2NTUxODg3NDgsImp0aSI6IjZhZjg0YzZiLWEwOWUtNDlhOC1iMjNkLTg5NGY3ODExOWNlNyJ9.KbYfonI0ZiRdvvehr2HW0xdqQH_JxwKkmHwytl8mI7Tu4BZvA4zewttLGSV50c7I873NQRHwaLNQPMdd7cpBfFSWmDlOlxjrtiVP_M-Bml32OoYXAIyey0ZSgEQqWyLaAK-DvTCmqMlTIVDx67zQGbZG36gmfRMhvkf66JOYgZw'
		HyperSnapSDK.init(jwtToken, HyperSnapParams.Region.India);
		HyperSnapSDK.startUserSession();
	  
	  
	  // Function wrapper for liveness button
	  function runLiveness(){
	  //For Face Capture Screen
		var hvFaceConfig = new HVFaceConfig(); // First create a hvFace config object
		hvFaceConfig.setShouldShowInstructionPage(true);

		HVFaceModule.start(hvFaceConfig, callback);// Start the HVFaceModule. Callback is the function that receives the data once the api call finishes.It gets two objects HVError and HVResponse.
	  }
	  
	 // Function wrapper for documents button
	 function runOCR(){ // Hopefully this 1 function should do both front and back for documents
	 //For Doc Front Capture Screen	
		var hvDocConfigFront = new HVDocConfig(); // First create a hvdoc config object
		hvDocConfigFront.setOCRDetails(
		  'OCR ENDPOINT',
		  hvDocConfigFront.DocumentSide.FRONT,
		  params,
		  headers,
		);
		hvDocConfigFront.setShouldShowInstructionPage(true);
		hvDocConfig.setShouldShowDocReviewScreen(true);
		hvDocConfig.setChooseDocumentCaptureOption(true);

		HVDocsModule.start(hvDocConfigFront, callback); // Start the HVDocsModule. Callback is the function that receives the data once the api call finishes.It gets two objects HVError and HVResponse.

	
	 //For Document Back Capture Screen
		var hvDocConfigBack = new HVDocConfig(); // First create a hvdoc config object
		hvDocConfigBack.setOCRDetails(
		  'OCR ENDPOINT',
		  hvDocConfigBack.DocumentSide.BACK,
		  params,
		  headers,
		);
		hvDocConfigBack.setShouldShowInstructionPage(true);
		hvDocConfig.setShouldShowDocReviewScreen(true);
		hvDocConfig.setChooseDocumentCaptureOption(true);

		HVDocsModule.start(hvDocConfigBack, callback); // Start the HVDocsModule. Callback is the function that receives the data once the api call finishes.It gets two objects HVError and HVResponse.

	 }
	 //Define Callback function
		callback = (HVError, HVResponse) => {
		  if(HVError) {
			var errorCode = HVError.getErrorCode();
			var errorMessage = HVError.getErrorMessage();
		  } 
		  else if(HVResponse) {
			var apiResults = HVResponse.getApiResult();
			var apiHeaders = HVResponse.getApiHeaders();
			var imageBase64 = HVResponse.getImageBase64();
			var attempts = HVResponse.getAttemptsCount();
		  }
		};
		
		HVNetworkHelper.makeFaceMatchCall(faceImageBase64String, docImageBase64String, {}, {}, callback); // Make Face Match call for a comparison between selfie and doc image
	</script>
  </body>
</html>	
		
